import requests
from requests.auth import HTTPBasicAuth

# Jenkins credentials
JENKINS_URL = "http://jenkins.com"
JOB_PATH = "gdt02/job/gdtwpb/job/nebula/job/dev/job/globalplatform/job/ihub/job/master"
BUILD_NUMBER = "<BUILD_NUMBER>"   # Replace with the specific build number
USER = "<USERNAME>"               # Jenkins username
API_TOKEN = "<API_TOKEN>"         # Jenkins API token

# Action: 'doProceed' to deploy, 'doAbort' to abort
ACTION = "doProceed"   # Use 'doAbort' to abort

# Jenkins input endpoint URL for performing the action
url = f"{JENKINS_URL}/{JOB_PATH}/{BUILD_NUMBER}/input/{ACTION}"

# Send the POST request to Jenkins
response = requests.post(url, auth=HTTPBasicAuth(USER, API_TOKEN))

if response.status_code == 200:
    print(f"Successfully executed {ACTION} on the pipeline.")
else:
    print(f"Failed to execute {ACTION}. Status code: {response.status_code}")
    print(response.text)
