pipeline {
    agent any

    parameters {
        string(name: 'FILE_NAME', description: 'Name of the file in the repo to upload')
        string(name: 'GCS_PATH', description: 'Full GCS path like gs://bucket-name/path/')
    }

    stages {
        stage('Checkout Repo') {
            steps {
                // Checkout your Git repo
                checkout scm
            }
        }

        stage('Upload to GCS') {
            steps {
                script {
                    // Check if file exists
                    if (!fileExists(params.FILE_NAME)) {
                        error "File '${params.FILE_NAME}' not found in repo"
                    }

                    // Run gsutil copy
                    sh """
                        echo "Uploading ${params.FILE_NAME} to ${params.GCS_PATH}..."
                        gsutil cp "${params.FILE_NAME}" "${params.GCS_PATH}"
                    """
                }
            }
        }
    }
}