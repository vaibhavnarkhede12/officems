def get_instance_group_instances(project):
    print(f"üîÑ Fetching instance groups for project: {project}")
    cmd = f"gcloud compute instance-groups managed list --project={project} --format=json"
    groups = run_gcloud_cmd(cmd)
    mig_instances = set()

    for group in groups:
        group_name = group["name"]
        location = group.get("zone") or group.get("region")
        location_type = "zone" if "zone" in group else "region"
        location_val = location.split("/")[-1]

        print(f"‚û°Ô∏è  Found MIG: {group_name} ({location_type}: {location_val})")

        cmd_detail = (
            f"gcloud compute instance-groups managed list-instances {group_name} "
            f"--{location_type}={location_val} --project={project} --format=json"
        )
        instances = run_gcloud_cmd(cmd_detail)
        for inst in instances:
            instance_name = inst["instance"].split("/")[-1]
            print(f"    ‚Ü™Ô∏è Instance in MIG: {instance_name}")
            mig_instances.add(instance_name)

    return mig_instances